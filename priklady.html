<!DOCTYPE html>
<html>
<head>
    <title>Pexeso</title>
    <style>
        #hra {
            display: grid;
            gap: 10px;
            justify-content: center;
        }

        .karta {
            width: 100px;
            height: 100px;
            background-color: #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            cursor: pointer;
            transition: transform 0.5s;
            transform-style: preserve-3d;
        }

        .karta.otocena {
            transform: rotateY(180deg);
            background-color: #eee;
        }

        .karta.sparena {
            visibility: hidden;
        }

        #ovladani {
            text-align: center;
            margin-top: 20px;
        }

        /* Responzivní design */
        @media (max-width: 600px) {
            #hra {
                grid-template-columns: repeat(2, 100px); /* 2 sloupce pro malé obrazovky */
            }
        }
    </style>
</head>
<body>
    <div id="hra"></div>
    <div id="ovladani">
        <button id="obtiznost-easy">Lehká</button>
        <button id="obtiznost-medium">Střední</button>
        <button id="obtiznost-hard">Těžká</button>
        <p>Tahů: <span id="tahy">0</span></p>
        <p>Čas: <span id="cas">0</span></p>
    </div>
    <script>
        const hra = document.getElementById('hra');
        const tahyElement = document.getElementById('tahy');
        const casElement = document.getElementById('cas');
        let tahy = 0;
        let cas = 0;
        let casovac;
        let obtiznost = 8; // Výchozí obtížnost (8 párů)
        let symboly = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L'];
        let karty = [];
        let otoceneKarty = [];
        let spareneKarty = [];

        function zacniHru() {
            hra.innerHTML = ''; // Vyčistíme hrací plochu
            tahy = 0;
            cas = 0;
            tahyElement.textContent = tahy;
            casElement.textContent = cas;
            clearInterval(casovac);
            casovac = setInterval(() => {
                cas++;
                casElement.textContent = cas;
            }, 1000);

            // Vybereme symboly podle obtížnosti
            karty = symboly.slice(0, obtiznost);
            karty = [...karty, ...karty];
            karty.sort(() => 0.5 - Math.random());

            karty.forEach((symbol, index) => {
                const karta = document.createElement('div');
                karta.classList.add('karta');
                karta.dataset.index = index;
                karta.dataset.symbol = symbol;
                hra.appendChild(karta);

                karta.addEventListener('click', () => otocKarta(karta));
            });

            hra.style.gridTemplateColumns = `repeat(${obtiznost > 8 ? 4 : 4}, 100px)`;// Nastavíme počet sloupců
        }

        function otocKarta(karta) {
            if (otoceneKarty.length < 2 && !karta.classList.contains('otocena') && !karta.classList.contains('sparena')) {
                karta.classList.add('otocena');
                otoceneKarty.push(karta);

                if (otoceneKarty.length === 2) {
                    tahy++;
                    tahyElement.textContent = tahy;
                    setTimeout(zkontrolujSpareni, 1000); // Zpoždění pro animaci
                }
            }
        }

        function zkontrolujSpareni() {
            const karta1 = otoceneKarty[0];
            const karta2 = otoceneKarty[1];

            if (karta1.dataset.symbol === karta2.dataset.symbol) {
                spareneKarty.push(karta1, karta2);
                otoceneKarty.forEach(karta => karta.classList.add('sparena'));
            }

            otoceneKarty.forEach(karta => karta.classList.remove('otocena'));
            otoceneKarty = [];

            if (spareneKarty.length === karty.length) {
                clearInterval(casovac);
                alert(`Gratuluji! Našel jsi všechny páry za ${tahy} tahů a ${cas} sekund.`);
                // Zde by se dalo uložit nejlepší výsledky (např. do localStorage nebo na server)
            }
        }

        // Ovládání obtížnosti
        document.getElementById('obtiznost-easy').addEventListener('click', () => { obtiznost = 4; zacniHru(); });
        document.getElementById('obtiznost-medium').addEventListener('click', () => { obtiznost = 8; zacniHru(); });
        document.getElementById('obtiznost-hard').addEventListener('click', () => { obtiznost = 12; zacniHru(); });

        zacniHru(); // Spustíme hru při načtení stránky
    </script>
</body>
</html>
